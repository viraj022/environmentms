{
    "sourceFile": "resources/views/complains.blade.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 3,
            "patches": [
                {
                    "date": 1648111540625,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1648122714548,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -27,9 +27,9 @@\n             <div class=\"row\">\n                 <div class=\"mt-5 col-3\">\n                     <div class=\"card card-primary\">\n                         <div class=\"card-header\">\n-                            <div class=\"card-title\">Complains</div>\n+                            <div class=\"card-title\">Complaints</div>\n                         </div>\n                         <div class=\"card-body\">\n                             <input type=\"text\" id=\"hidden_id\" value=\"\" hidden>\n                             <form enctype=\"multipart/form-data\" id=\"complain_frm\">\n@@ -38,9 +38,9 @@\n                                     <select id=\"ps\"\n                                         class=\"form-control form-control-sm select2 select2-purple cutenzReq\"></select>\n                                 </div>\n                                 <div class=\"form-group\">\n-                                    <label>Complain Code*</label>\n+                                    <label>Complaint Code*</label>\n                                     <input id=\"complainer_code\" name=\"complainer_code\" type=\"text\" maxlength=\"45\"\n                                         class=\"form-control form-control-sm cutenzReq\" readonly>\n                                 </div>\n                                 <div class=\"form-group\">\n@@ -48,13 +48,13 @@\n                                     <input id=\"complainer_name_ipt\" name=\"complainer_name_ipt\" type=\"text\" maxlength=\"45\"\n                                         class=\"form-control form-control-sm cutenzReq\"\n                                         placeholder=\"Enter complainer name...\" value=\"\" required>\n                                     <div id=\"comp_name_valid\" class=\"d-none\">\n-                                        <p class=\"text-danger\">Container Name is required</p>\n+                                        <p class=\"text-danger\">Complainer Name is required</p>\n                                     </div>\n                                 </div>\n                                 <div class=\"form-group\">\n-                                    <label>Complain Recieve Type</label>\n+                                    <label>Complaint Recieve Type</label>\n                                     <select id=\"recieve_type_ipt\" name=\"recieve_type_ipt\"\n                                         class=\"form-control form-control-sm\">\n                                         <option value=\"1\">Call</option>\n                                         <option value=\"2\">Written</option>\n@@ -76,9 +76,9 @@\n                                 <div class=\"form-group\">\n                                     <label>Complainer Contact Number*</label>\n                                     <input id=\"contact_complainer_ipt\" name=\"contact_complainer_ipt\"\n                                         onKeyDown=\"if (this.value.length == 10 && event.keyCode != 8)\n-                                                                                                                        return false;\" type=\"number\"\n+                                                                                                                            return false;\" type=\"number\"\n                                         class=\"form-control form-control-sm\"\n                                         placeholder=\"Enter Contact Number of complainer...\" value=\"\" required>\n                                     <div id=\"contact_complainer_valid\" class=\"d-none\">\n                                         <p class=\"text-danger\">Complainer Contact Number is required</p>\n@@ -88,17 +88,17 @@\n                                     <label>Complain Description*</label>\n                                     <textarea id=\"complain_desc_ipt\" name=\"complain_desc_ipt\" class=\"form-control form-control-sm\"\n                                         placeholder=\"Enter complain Description...\" value=\"\" required></textarea>\n                                     <div id=\"complain_desc_valid\" class=\"d-none\">\n-                                        <p class=\"text-danger\">Complain description required</p>\n+                                        <p class=\"text-danger\">Complaint description required</p>\n                                     </div>\n                                 </div>\n                                 <div class=\"form-group\">\n                                     <label>Attachment: </label>\n                                     <input type=\"file\" id=\"complain_attach\" name=\"complain_attach\"\n                                         accept=\".png, .jpg, .jpeg\" multiple>\n                                     <div id=\"complain_attach_valid\" class=\"d-none\">\n-                                        <p class=\"text-danger\">Complain attachment required</p>\n+                                        <p class=\"text-danger\">Complaint attachment required</p>\n                                     </div>\n                                     <span id=\"attachment_view\"></span>\n                                 </div>\n                                 <div class=\"row mt-5\">\n@@ -113,15 +113,15 @@\n                     </div>\n                 </div>\n                 <div class=\" mt-5 col-md-9\">\n                     <div class=\"card card-primary\">\n-                        <div class=\"card-header\"> Complain Table </div>\n+                        <div class=\"card-header\"> Complaint Table </div>\n                         <div class=\"card-body table-responsive\">\n                             <table class=\"table table-bordered\" id=\"complain_tbl\">\n                                 <thead>\n                                     <tr>\n                                         <th>#</th>\n-                                        <th>complain Code</th>\n+                                        <th>complaint Code</th>\n                                         <th style=\"width: 20%\">Complainer Name</th>\n                                         <th style=\"width: 14%\">Contact Number</th>\n                                         <!-- <th>Description</th> -->\n                                         <th style=\"width: 15%\">Recieved Type</th>\n@@ -216,9 +216,9 @@\n \n             let id = $(this).val();\n \n             Swal.fire({\n-                title: 'Do you want to delete complain?',\n+                title: 'Do you want to delete complaint?',\n                 showDenyButton: true,\n                 showCancelButton: true,\n                 confirmButtonText: 'confirm',\n                 denyButtonText: `Don't confirm`,\n"
                },
                {
                    "date": 1648122725414,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -84,9 +84,9 @@\n                                         <p class=\"text-danger\">Complainer Contact Number is required</p>\n                                     </div>\n                                 </div>\n                                 <div class=\"form-group\">\n-                                    <label>Complain Description*</label>\n+                                    <label>Complaint Description*</label>\n                                     <textarea id=\"complain_desc_ipt\" name=\"complain_desc_ipt\" class=\"form-control form-control-sm\"\n                                         placeholder=\"Enter complain Description...\" value=\"\" required></textarea>\n                                     <div id=\"complain_desc_valid\" class=\"d-none\">\n                                         <p class=\"text-danger\">Complaint description required</p>\n"
                },
                {
                    "date": 1648122764510,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -76,9 +76,9 @@\n                                 <div class=\"form-group\">\n                                     <label>Complainer Contact Number*</label>\n                                     <input id=\"contact_complainer_ipt\" name=\"contact_complainer_ipt\"\n                                         onKeyDown=\"if (this.value.length == 10 && event.keyCode != 8)\n-                                                                                                                            return false;\" type=\"number\"\n+                                                                                                                                return false;\" type=\"number\"\n                                         class=\"form-control form-control-sm\"\n                                         placeholder=\"Enter Contact Number of complainer...\" value=\"\" required>\n                                     <div id=\"contact_complainer_valid\" class=\"d-none\">\n                                         <p class=\"text-danger\">Complainer Contact Number is required</p>\n"
                }
            ],
            "date": 1648111540625,
            "name": "Commit-0",
            "content": "@extends('layouts.admin')\n@extends('layouts.styles')\n@extends('layouts.scripts')\n@extends('layouts.navbar')\n@extends('layouts.sidebar')\n@extends('layouts.footer')\n\n@section('pageStyles')\n    <link href=\"plugins/datatables-bs4/css/dataTables.bootstrap4.min.css\" rel=\"stylesheet\" type=\"text/css\" />\n    <link rel=\"stylesheet\" href=\"/plugins/select2/css/select2.min.css\">\n    <link rel=\"stylesheet\" href=\"/dist/css/adminlte.min.css\">\n    <style>\n        table td {\n            vertical-align: top;\n            padding: 5px;\n            word-break: break-all;\n            /* MUST ADD THIS */\n        }\n\n    </style>\n@endsection\n\n@section('content')\n    <!-- Main content -->\n    <section class=\"content\">\n        <div class=\"container-fluid\">\n            <div class=\"row\">\n                <div class=\"mt-5 col-3\">\n                    <div class=\"card card-primary\">\n                        <div class=\"card-header\">\n                            <div class=\"card-title\">Complains</div>\n                        </div>\n                        <div class=\"card-body\">\n                            <input type=\"text\" id=\"hidden_id\" value=\"\" hidden>\n                            <form enctype=\"multipart/form-data\" id=\"complain_frm\">\n                                <div class=\"form-group\">\n                                    <label>Pradeshiya Sabha*</label>\n                                    <select id=\"ps\"\n                                        class=\"form-control form-control-sm select2 select2-purple cutenzReq\"></select>\n                                </div>\n                                <div class=\"form-group\">\n                                    <label>Complain Code*</label>\n                                    <input id=\"complainer_code\" name=\"complainer_code\" type=\"text\" maxlength=\"45\"\n                                        class=\"form-control form-control-sm cutenzReq\" readonly>\n                                </div>\n                                <div class=\"form-group\">\n                                    <label>Complainer Name*</label>\n                                    <input id=\"complainer_name_ipt\" name=\"complainer_name_ipt\" type=\"text\" maxlength=\"45\"\n                                        class=\"form-control form-control-sm cutenzReq\"\n                                        placeholder=\"Enter complainer name...\" value=\"\" required>\n                                    <div id=\"comp_name_valid\" class=\"d-none\">\n                                        <p class=\"text-danger\">Container Name is required</p>\n                                    </div>\n                                </div>\n                                <div class=\"form-group\">\n                                    <label>Complain Recieve Type</label>\n                                    <select id=\"recieve_type_ipt\" name=\"recieve_type_ipt\"\n                                        class=\"form-control form-control-sm\">\n                                        <option value=\"1\">Call</option>\n                                        <option value=\"2\">Written</option>\n                                        <option value=\"3\">Verbal</option>\n                                    </select>\n                                    <div id=\"recieve_type_valid\" class=\"d-none\">\n                                        <p class=\"text-danger\">Recieve type required</p>\n                                    </div>\n                                </div>\n                                <div class=\"form-group\">\n                                    <label>Complainer Address*</label>\n                                    <input id=\"complainer_address_ipt\" name=\"complainer_address_ipt\" type=\"text\"\n                                        maxlength=\"45\" class=\"form-control form-control-sm cutenzReq\"\n                                        placeholder=\"Enter complainer address...\" value=\"\" required>\n                                    <div id=\"comp_address_valid\" class=\"d-none\">\n                                        <p class=\"text-danger\">Container Address is required</p>\n                                    </div>\n                                </div>\n                                <div class=\"form-group\">\n                                    <label>Complainer Contact Number*</label>\n                                    <input id=\"contact_complainer_ipt\" name=\"contact_complainer_ipt\"\n                                        onKeyDown=\"if (this.value.length == 10 && event.keyCode != 8)\n                                                                                                                        return false;\" type=\"number\"\n                                        class=\"form-control form-control-sm\"\n                                        placeholder=\"Enter Contact Number of complainer...\" value=\"\" required>\n                                    <div id=\"contact_complainer_valid\" class=\"d-none\">\n                                        <p class=\"text-danger\">Complainer Contact Number is required</p>\n                                    </div>\n                                </div>\n                                <div class=\"form-group\">\n                                    <label>Complain Description*</label>\n                                    <textarea id=\"complain_desc_ipt\" name=\"complain_desc_ipt\" class=\"form-control form-control-sm\"\n                                        placeholder=\"Enter complain Description...\" value=\"\" required></textarea>\n                                    <div id=\"complain_desc_valid\" class=\"d-none\">\n                                        <p class=\"text-danger\">Complain description required</p>\n                                    </div>\n                                </div>\n                                <div class=\"form-group\">\n                                    <label>Attachment: </label>\n                                    <input type=\"file\" id=\"complain_attach\" name=\"complain_attach\"\n                                        accept=\".png, .jpg, .jpeg\" multiple>\n                                    <div id=\"complain_attach_valid\" class=\"d-none\">\n                                        <p class=\"text-danger\">Complain attachment required</p>\n                                    </div>\n                                    <span id=\"attachment_view\"></span>\n                                </div>\n                                <div class=\"row mt-5\">\n                                    <div class=\"form-group col-12\">\n                                        <button type=\"button\" class=\"btn btn-lg btn-success\" id=\"save\">Save</button>\n                                        <button type=\"button\" class=\"btn btn-lg btn-warning d-none\"\n                                            id=\"update\">Update</button>\n                                    </div>\n                                </div>\n                            </form>\n                        </div>\n                    </div>\n                </div>\n                <div class=\" mt-5 col-md-9\">\n                    <div class=\"card card-primary\">\n                        <div class=\"card-header\"> Complain Table </div>\n                        <div class=\"card-body table-responsive\">\n                            <table class=\"table table-bordered\" id=\"complain_tbl\">\n                                <thead>\n                                    <tr>\n                                        <th>#</th>\n                                        <th>complain Code</th>\n                                        <th style=\"width: 20%\">Complainer Name</th>\n                                        <th style=\"width: 14%\">Contact Number</th>\n                                        <!-- <th>Description</th> -->\n                                        <th style=\"width: 15%\">Recieved Type</th>\n                                        <th>Status</th>\n                                        <th style=\"width: 10%\">Action</th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    <tr>\n                                        <td colspan=\"7\" class=\"text-center\"><b>No Data</b></td>\n                                    </tr>\n                                </tbody>\n                            </table>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </section>\n@endsection\n\n@section('pageScripts')\n    <script src=\"../../dist/js/adminlte.min.js\"></script>\n\n    <script src=\"{{ asset('plugins/jquery-validation/jquery.validate.min.js') }}\"></script>\n    <script src=\"{{ asset('js/complains/complains.js') }}\"></script>\n    <script src=\"../../plugins/select2/js/select2.full.min.js\"></script>\n    <script src=\"../../dist/js/adminlte.min.js\"></script>\n\n    <!-- Page script -->\n    <script>\n        $(document).ready(function() {\n            loadPradeshiyaSabha(function() {\n                gen_complain_code();\n            });\n            load_complains();\n        });\n\n        $('#ps').change(function() {\n            gen_complain_code();\n        });\n\n        $('#complain_attach').change(function() {\n            let index = 0;\n            let html = \"\";\n            $.each($('#complain_attach')[0].files, function(key, val) {\n                html += \"<img src='\" + window.URL.createObjectURL(val) + \"' width='100em' height='100em'/>\";\n            });\n            $('#attachment_view').html(html);\n        });\n\n        $('#save').click(function() {\n            let is_valid = jQuery(\"#complain_frm\").valid();\n            if (is_valid) {\n                save_complain();\n            } else {\n                swal.fire('failed', 'Required fields must fill', 'warning');\n            }\n\n        });\n\n        $('#update').click(function() {\n            let is_valid = jQuery(\"#complain_frm\").valid();\n            if (is_valid) {\n                update_complain();\n            } else {\n                swal.fire('failed', 'Required fields must fill', 'warning');\n            }\n        });\n\n        $(document).on('click', '.btn-edit', function() {\n            let id = $(this).val();\n            let url = '/api/complain_profile_data/id/' + id;\n            ajaxRequest('GET', url, null, function(resp) {\n                $('#complainer_code').val(resp.complainer_code);\n                $('#complainer_name_ipt').val(resp.complainer_name);\n                $('#complainer_address_ipt').val(resp.complainer_address);\n                $('#contact_complainer_ipt').val(resp.comp_contact_no);\n                $('#complain_desc_ipt').val(resp.complain_des);\n                $('#recieve_type_ipt').val(resp.recieve_type);\n                $('#hidden_id').val(resp.id);\n                $('#ps').val(resp.pradeshiya_saba_id);\n                $('#ps').change();\n                $('.select2').select2();\n            });\n\n            $('#save').addClass('d-none');\n            $('#update').removeClass('d-none');\n        });\n\n        $(document).on('click', '.btn-del', function() {\n\n            let id = $(this).val();\n\n            Swal.fire({\n                title: 'Do you want to delete complain?',\n                showDenyButton: true,\n                showCancelButton: true,\n                confirmButtonText: 'confirm',\n                denyButtonText: `Don't confirm`,\n            }).then((result) => {\n                /* Read more about isConfirmed, isDenied below */\n                if (result.value) {\n                    delete_complain(id);\n                } else if (result.isDenied) {\n                    Swal.fire('Canceled!', 'Confirmation was cancelled', 'info')\n                }\n            })\n        });\n\n        var complain_form;\n        complain_form = $(\"#complain_frm\").validate({\n            errorClass: \"invalid\",\n            rules: {\n                contact_complainer_ipt: {\n                    valid_lk_phone: true,\n                },\n            },\n            errorElement: 'span',\n            errorPlacement: function(error, element) {\n                error.addClass('invalid-feedback');\n                element.closest('.form-group').append(error);\n            },\n            highlight: function(element, errorClass, validClass) {\n                $(element).addClass('is-invalid');\n            },\n            unhighlight: function(element, errorClass, validClass) {\n                $(element).removeClass('is-invalid');\n            }\n        });\n\n        jQuery.validator.setDefaults({\n            errorElement: \"span\",\n            ignore: \":hidden:not(select.chosen-select)\",\n            errorPlacement: function(error, element) {\n                // Add the `help-block` class to the error element\n                error.addClass(\"help-block\");\n                if (element.prop(\"type\") === \"checkbox\") {\n                    //                error.insertAfter(element.parent(\"label\"));\n                    error.appendTo(element.parents(\"validate-parent\"));\n                } else if (element.is(\"select.chosen-select\")) {\n                    error.insertAfter(element.siblings(\".chosen-container\"));\n                } else if (element.prop(\"type\") === \"radio\") {\n                    error.appendTo(element.parents(\"div.validate-parent\"));\n                } else {\n                    error.insertAfter(element);\n                }\n            },\n            highlight: function(element, errorClass, validClass) {\n                jQuery(element).parents(\".validate-parent\").addClass(\"has-error\").removeClass(\"has-success\");\n            },\n            unhighlight: function(element, errorClass, validClass) {\n                jQuery(element).parents(\".validate-parent\").removeClass(\"has-error\");\n            }\n        });\n        jQuery.validator.addMethod(\"valide_code\", function(value, element) {\n            return this.optional(element) || /^[a-zA-Z\\s\\d\\_\\-()]{1,100}$/.test(value);\n        }, \"Please enter a valid Code\");\n        jQuery.validator.addMethod(\"valid_name\", function(value, element) {\n            return this.optional(element) || /^[a-zA-Z\\s\\.\\&\\-()]*$/.test(value);\n        }, \"Please enter a valid name\");\n        jQuery.validator.addMethod(\"valid_date\", function(value, element) {\n            return this.optional(element) || /^\\d{4}\\-\\d{2}\\-\\d{2}$/.test(value);\n        }, \"Please enter a valid date ex. 2017-03-27\");\n        jQuery.validator.addMethod(\"valide_email\", function(value, element) {\n            return this.optional(element) || /^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}$/.test(value);\n        }, \"Please enter a valid email addresss\");\n        jQuery.validator.addMethod(\"valid_lk_phone\", function(value, element) {\n            return this.optional(element) || /^0[7][0-9]{8}$/.test(value);\n        }, \"Please enter a valid phone number\");\n        jQuery.validator.addMethod(\"valid_lk_nic\", function(value, element) {\n            return this.optional(element) || /^([0-9]{9}[x|X|v|V]|[0-9]{12})$/.test(value);\n        }, \"Please enter a valid NIC number\");\n    </script>\n@endsection\n"
        }
    ]
}