{
    "sourceFile": "public/js/complains/complainProfile.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 25,
            "patches": [
                {
                    "date": 1648116866364,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1648118539600,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -225,9 +225,9 @@\n }\n \n function comment_on_complain() {\n     if ($('#comment').val().trim() != '') {\n-        let data = { 'minute': $('#comment').val().trim() };\n+        let data = { 'comment_on_complain': $('#comment').val().trim() };\n         ajaxRequest('POST', \"/api/comment_on_complain\", data, function (result) {\n             if (result.status == 1) {\n                 swal.fire('success', 'Successfully added the comment', 'success');\n                 forms_reset();\n"
                },
                {
                    "date": 1648118545595,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -225,9 +225,9 @@\n }\n \n function comment_on_complain() {\n     if ($('#comment').val().trim() != '') {\n-        let data = { 'comment_on_complain': $('#comment').val().trim() };\n+        let data = { 'comment': $('#comment').val().trim() };\n         ajaxRequest('POST', \"/api/comment_on_complain\", data, function (result) {\n             if (result.status == 1) {\n                 swal.fire('success', 'Successfully added the comment', 'success');\n                 forms_reset();\n"
                },
                {
                    "date": 1648118624322,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -225,9 +225,9 @@\n }\n \n function comment_on_complain() {\n     if ($('#comment').val().trim() != '') {\n-        let data = { 'comment': $('#comment').val().trim() };\n+        let data = { 'comment': $('#comment').val().trim(),\"complain_id\" };\n         ajaxRequest('POST', \"/api/comment_on_complain\", data, function (result) {\n             if (result.status == 1) {\n                 swal.fire('success', 'Successfully added the comment', 'success');\n                 forms_reset();\n"
                },
                {
                    "date": 1648118639044,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -225,9 +225,9 @@\n }\n \n function comment_on_complain() {\n     if ($('#comment').val().trim() != '') {\n-        let data = { 'comment': $('#comment').val().trim(),\"complain_id\" };\n+        let data = { 'comment': $('#comment').val().trim(),\"complain_id\": };\n         ajaxRequest('POST', \"/api/comment_on_complain\", data, function (result) {\n             if (result.status == 1) {\n                 swal.fire('success', 'Successfully added the comment', 'success');\n                 forms_reset();\n"
                },
                {
                    "date": 1648118648835,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -223,9 +223,9 @@\n         }\n     });\n }\n \n-function comment_on_complain() {\n+function comment_on_complain(data) {\n     if ($('#comment').val().trim() != '') {\n         let data = { 'comment': $('#comment').val().trim(),\"complain_id\": };\n         ajaxRequest('POST', \"/api/comment_on_complain\", data, function (result) {\n             if (result.status == 1) {\n"
                },
                {
                    "date": 1648118662827,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -224,9 +224,9 @@\n     });\n }\n \n function comment_on_complain(data) {\n-    if ($('#comment').val().trim() != '') {\n+    if (data.comment != '') {\n         let data = { 'comment': $('#comment').val().trim(),\"complain_id\": };\n         ajaxRequest('POST', \"/api/comment_on_complain\", data, function (result) {\n             if (result.status == 1) {\n                 swal.fire('success', 'Successfully added the comment', 'success');\n"
                },
                {
                    "date": 1648118669699,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -225,9 +225,9 @@\n }\n \n function comment_on_complain(data) {\n     if (data.comment != '') {\n-        let data = { 'comment': $('#comment').val().trim(),\"complain_id\": };\n+        \n         ajaxRequest('POST', \"/api/comment_on_complain\", data, function (result) {\n             if (result.status == 1) {\n                 swal.fire('success', 'Successfully added the comment', 'success');\n                 forms_reset();\n"
                },
                {
                    "date": 1648119192457,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,8 +24,9 @@\n \n }\n \n function loadProfileData(user_id) {\n+    alert\n     let id = $('#complain_profile_id').val();\n     let url = '/api/complain_profile_data/id/' + id;\n     ajaxRequest('GET', url, null, function (resp) {\n         $('#comp_code').html(resp.complainer_code);\n@@ -225,9 +226,8 @@\n }\n \n function comment_on_complain(data) {\n     if (data.comment != '') {\n-        \n         ajaxRequest('POST', \"/api/comment_on_complain\", data, function (result) {\n             if (result.status == 1) {\n                 swal.fire('success', 'Successfully added the comment', 'success');\n                 forms_reset();\n"
                },
                {
                    "date": 1648119222094,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,9 +24,8 @@\n \n }\n \n function loadProfileData(user_id) {\n-    alert\n     let id = $('#complain_profile_id').val();\n     let url = '/api/complain_profile_data/id/' + id;\n     ajaxRequest('GET', url, null, function (resp) {\n         $('#comp_code').html(resp.complainer_code);\n"
                },
                {
                    "date": 1648119291534,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -229,9 +229,9 @@\n         ajaxRequest('POST', \"/api/comment_on_complain\", data, function (result) {\n             if (result.status == 1) {\n                 swal.fire('success', 'Successfully added the comment', 'success');\n                 forms_reset();\n-                loadProfileData();\n+                loadProfileData(data);\n             } else {\n                 swal.fire('failed', 'Comment addition was unsuccessful', 'warning');\n             }\n         });\n"
                },
                {
                    "date": 1648119298390,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -229,9 +229,9 @@\n         ajaxRequest('POST', \"/api/comment_on_complain\", data, function (result) {\n             if (result.status == 1) {\n                 swal.fire('success', 'Successfully added the comment', 'success');\n                 forms_reset();\n-                loadProfileData(data);\n+                loadProfileData(data.user_id);\n             } else {\n                 swal.fire('failed', 'Comment addition was unsuccessful', 'warning');\n             }\n         });\n"
                },
                {
                    "date": 1648119327610,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -228,9 +228,8 @@\n     if (data.comment != '') {\n         ajaxRequest('POST', \"/api/comment_on_complain\", data, function (result) {\n             if (result.status == 1) {\n                 swal.fire('success', 'Successfully added the comment', 'success');\n-                forms_reset();\n                 loadProfileData(data.user_id);\n             } else {\n                 swal.fire('failed', 'Comment addition was unsuccessful', 'warning');\n             }\n"
                },
                {
                    "date": 1648119449589,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -139,9 +139,9 @@\n }\n function iterateComplain_comments(object, user_id) {\n     let comments = '';\n     $.each(object, function (key, value2) {\n-        let chat_msg = (value2.commented_user.id != user_id) ? 'right' : '';\n+        let chat_msg = (value2.commented_user.id == user_id) ? 'right' : '';\n         let chat_name = (value2.commented_user.id != user_id) ? 'float-right' : 'float-left';\n         let chat_time = (value2.commented_user.id != user_id) ? 'float-left' : 'float-right';\n         comments += `<div class=\"direct-chat-msg ${chat_msg}\"><div class=\"direct-chat-infos clearfix\">\n                 <span class=\"direct-chat-name ${chat_name}\">${value2.commented_user.first_name} ${value2.commented_user.last_name}</span>\n"
                },
                {
                    "date": 1648119857328,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -120,8 +120,9 @@\n         }\n         $('#assigned_user').html(assigned_user);\n     });\n }\n+\n function iterateComplain_minit(object, user_id) {\n     let minute = '';\n     $.each(object, function (key, value2) {\n         let chat_msg = (value2.minute_user.id != user_id) ? 'right' : '';\n@@ -140,10 +141,10 @@\n function iterateComplain_comments(object, user_id) {\n     let comments = '';\n     $.each(object, function (key, value2) {\n         let chat_msg = (value2.commented_user.id == user_id) ? 'right' : '';\n-        let chat_name = (value2.commented_user.id != user_id) ? 'float-right' : 'float-left';\n-        let chat_time = (value2.commented_user.id != user_id) ? 'float-left' : 'float-right';\n+        let chat_name = (value2.commented_user.id == user_id) ? 'float-right' : 'float-left';\n+        let chat_time = (value2.commented_user.id == user_id) ? 'float-left' : 'float-right';\n         comments += `<div class=\"direct-chat-msg ${chat_msg}\"><div class=\"direct-chat-infos clearfix\">\n                 <span class=\"direct-chat-name ${chat_name}\">${value2.commented_user.first_name} ${value2.commented_user.last_name}</span>\n                 <span class=\"direct-chat-timestamp ${chat_time}\">${value2.created_at}</span>\n             </div>\n"
                },
                {
                    "date": 1648119873439,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -135,10 +135,11 @@\n             <img class=\"direct-chat-img\" src=\"/dist/img/user3-128x128.jpg\" alt=\"Message User Image\">\n             <div class=\"direct-chat-text\">${value2.minute}</div>\n         </div>`;\n     });\n-    $('#minute_section').html(minute);\n+    $('.minute_section').html(minute);\n }\n+\n function iterateComplain_comments(object, user_id) {\n     let comments = '';\n     $.each(object, function (key, value2) {\n         let chat_msg = (value2.commented_user.id == user_id) ? 'right' : '';\n"
                },
                {
                    "date": 1648119969139,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -240,9 +240,9 @@\n         swal.fire('failed', 'Comment cannot be empty!', 'warning');\n     }\n }\n \n-function add_minute_to_complain() {\n+function add_minute_to_complain(data) {\n     if ($('#minute').val() != '') {\n         let data = $('#minutes_frm').serializeArray();\n         ajaxRequest('POST', \"/api/minute_on_complain\", data, function (result) {\n             if (result.status == 1) {\n"
                },
                {
                    "date": 1648119976334,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -241,9 +241,9 @@\n     }\n }\n \n function add_minute_to_complain(data) {\n-    if ($('#minute').val() != '') {\n+    if (data.mini != '') {\n         let data = $('#minutes_frm').serializeArray();\n         ajaxRequest('POST', \"/api/minute_on_complain\", data, function (result) {\n             if (result.status == 1) {\n                 swal.fire('success', 'Successfully added the minute', 'success');\n"
                },
                {
                    "date": 1648120014757,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -241,9 +241,9 @@\n     }\n }\n \n function add_minute_to_complain(data) {\n-    if (data.mini != '') {\n+    if (data.minute != '') {\n         let data = $('#minutes_frm').serializeArray();\n         ajaxRequest('POST', \"/api/minute_on_complain\", data, function (result) {\n             if (result.status == 1) {\n                 swal.fire('success', 'Successfully added the minute', 'success');\n"
                },
                {
                    "date": 1648120020453,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -247,9 +247,9 @@\n         ajaxRequest('POST', \"/api/minute_on_complain\", data, function (result) {\n             if (result.status == 1) {\n                 swal.fire('success', 'Successfully added the minute', 'success');\n                 forms_reset()\n-                loadProfileData();\n+                loadProfileData(data.);\n             } else {\n                 swal.fire('failed', 'minute addition was unsuccessful', 'warning');\n             }\n         });\n"
                },
                {
                    "date": 1648120043172,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -247,9 +247,9 @@\n         ajaxRequest('POST', \"/api/minute_on_complain\", data, function (result) {\n             if (result.status == 1) {\n                 swal.fire('success', 'Successfully added the minute', 'success');\n                 forms_reset()\n-                loadProfileData(data.);\n+                loadProfileData(data.user_id);\n             } else {\n                 swal.fire('failed', 'minute addition was unsuccessful', 'warning');\n             }\n         });\n"
                },
                {
                    "date": 1648120053738,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -242,13 +242,11 @@\n }\n \n function add_minute_to_complain(data) {\n     if (data.minute != '') {\n-        let data = $('#minutes_frm').serializeArray();\n         ajaxRequest('POST', \"/api/minute_on_complain\", data, function (result) {\n             if (result.status == 1) {\n                 swal.fire('success', 'Successfully added the minute', 'success');\n-                forms_reset()\n                 loadProfileData(data.user_id);\n             } else {\n                 swal.fire('failed', 'minute addition was unsuccessful', 'warning');\n             }\n"
                },
                {
                    "date": 1648120171743,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -124,9 +124,9 @@\n \n function iterateComplain_minit(object, user_id) {\n     let minute = '';\n     $.each(object, function (key, value2) {\n-        let chat_msg = (value2.minute_user.id != user_id) ? 'right' : '';\n+        let chat_msg = (value2.minute_user.id == user_id) ? 'right' : '';\n         let chat_name = (value2.minute_user.id != user_id) ? 'float-right' : 'float-left';\n         let chat_time = (value2.minute_user.id != user_id) ? 'float-left' : 'float-right';\n         minute += `<div class=\"direct-chat-msg ${chat_msg}\"><div class=\"direct-chat-infos clearfix\">\n                 <span class=\"direct-chat-name ${chat_name}\">${value2.minute_user.first_name} ${value2.minute_user.last_name}</span>\n"
                },
                {
                    "date": 1648120365452,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -107,13 +107,8 @@\n         }\n \n         if (resp.complain_minutes != '') {\n             iterateComplain_minit(resp.complain_minutes, user_id);\n-            // let minutes = '';\n-            // $.each(resp.complain_minutes, function (key, value2) {\n-            //     minutes += '<div class=\"card-comment\"><div class=\"comment-text\"><span class=\"username\">' + value2.minute_user.user_name + '<span class=\"text-muted float-right\">' + value2.created_at + '</span><br><span class=\"text-muted\">' + value2.minute + '</span></div></div>';\n-            // });\n-            // $('#minute_section').html(minutes);\n         }\n         let assigned_user = 'Not Assigned';\n         if (resp.assigned_user != null) {\n             assigned_user = resp.assigned_user.first_name + ' ' + resp.assigned_user.last_name;\n@@ -125,10 +120,10 @@\n function iterateComplain_minit(object, user_id) {\n     let minute = '';\n     $.each(object, function (key, value2) {\n         let chat_msg = (value2.minute_user.id == user_id) ? 'right' : '';\n-        let chat_name = (value2.minute_user.id != user_id) ? 'float-right' : 'float-left';\n-        let chat_time = (value2.minute_user.id != user_id) ? 'float-left' : 'float-right';\n+        let chat_name = (value2.minute_user.id == user_id) ? 'float-right' : 'float-left';\n+        let chat_time = (value2.minute_user.id == user_id) ? 'float-left' : 'float-right';\n         minute += `<div class=\"direct-chat-msg ${chat_msg}\"><div class=\"direct-chat-infos clearfix\">\n                 <span class=\"direct-chat-name ${chat_name}\">${value2.minute_user.first_name} ${value2.minute_user.last_name}</span>\n                 <span class=\"direct-chat-timestamp ${chat_time}\">${value2.created_at}</span>\n             </div>\n"
                },
                {
                    "date": 1648120413075,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -239,9 +239,9 @@\n function add_minute_to_complain(data) {\n     if (data.minute != '') {\n         ajaxRequest('POST', \"/api/minute_on_complain\", data, function (result) {\n             if (result.status == 1) {\n-                swal.fire('success', 'Successfully added the minute', 'success');\n+                swal.fire('success', 'Successfully added the minute', 'success');.\n                 loadProfileData(data.user_id);\n             } else {\n                 swal.fire('failed', 'minute addition was unsuccessful', 'warning');\n             }\n"
                },
                {
                    "date": 1648120427589,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -240,9 +240,9 @@\n     if (data.minute != '') {\n         ajaxRequest('POST', \"/api/minute_on_complain\", data, function (result) {\n             if (result.status == 1) {\n                 swal.fire('success', 'Successfully added the minute', 'success');\n-                $(;#)\n+                $(;)\n                 loadProfileData(data.user_id);\n             } else {\n                 swal.fire('failed', 'minute addition was unsuccessful', 'warning');\n             }\n"
                }
            ],
            "date": 1648116866364,
            "name": "Commit-0",
            "content": "function update_attachments() {\n    let id = $('#complain_profile_id').val();\n    let url = '/api/update_attachments/id/' + id;\n    let arr = [];\n    let index = 0;\n    $.each($('#fileUploadInput')[0].files, function (key, val) {\n        arr[index++] = val;\n    });\n    if (arr.length != 0) {\n        ulploadFileWithData(url, null, function (resp) {\n            if (resp.status == 1) {\n                loadProfileData();\n                $('#fileUploadInput').val('');\n                $('#attached_files').html('');\n\n                swal.fire('success', 'Successfully change the attachments of complains', 'success');\n            } else {\n                swal.fire('failed', 'Complain attachments change is unsuccessful', 'warning');\n            }\n        }, false, arr);\n    } else {\n        swal.fire('failed', 'One or more images must be selected to upload', 'warning');\n    }\n\n}\n\nfunction loadProfileData(user_id) {\n    let id = $('#complain_profile_id').val();\n    let url = '/api/complain_profile_data/id/' + id;\n    ajaxRequest('GET', url, null, function (resp) {\n        $('#comp_code').html(resp.complainer_code);\n        if (resp.assigned_user != null) {\n            $('#assigned_officer').html(resp.assigned_user.user_name);\n        } else {\n            $('#assigned_officer').html('N/A');\n        }\n        if (resp.created_user != null) {\n            $('#created_user').html(resp.created_user.user_name);\n        } else {\n            $('#created_user').html('N/A');\n        }\n        $('#comp_name').html(resp.complainer_name);\n        $('#comp_address').html(resp.complainer_address);\n        $('#comp_contact_no').html(resp.comp_contact_no);\n        $('#comp_desc').html(resp.complain_des);\n\n        if (resp.status == 1) {\n            $('#comp_status').addClass('badge bg-success').text('Complete');\n        } else if (resp.status == -1) {\n            $('#comp_status').addClass('badge bg-danger').text('Rejected');\n        } else if (resp.status == 0) {\n            $('#comp_status').addClass('badge bg-warning').text('Pending');\n        }\n\n        if (resp.status == 1 || resp.status == -1 || resp.status == 4) {\n            $('#confirm').addClass('d-none');\n            $('#reject').addClass('d-none');\n        } else {\n            $('#reject').removeClass('d-none');\n            $('#confirm').removeClass('d-none');\n        }\n\n        if (resp.status != 4 && resp.status != 1 && resp.status != -1) {\n            $('#forward_letter_preforation').removeClass('d-none');\n        } else {\n            $('#forward_letter_preforation').addClass('d-none');\n        }\n\n        let last_index = resp.letters.length - 1;\n\n        if (resp.letters[last_index] != null) {\n            if (resp.letters[last_index].status == 'COMPLETED' && resp.status != 1 && resp.status != -1) {\n                $('#confirm').removeClass('d-none');\n            }\n        }\n\n        $('#comp_by').html('<span class=\"badge bg-success\">' + resp.complainer_name + '</span>');\n\n        let image = '';\n        if (resp.attachment != null || resp.attachment.length != 0 || resp.attachment.file_path != null) {\n            let unescaped_data = unescape(resp.attachment);\n            if (unescaped_data != '') {\n                let data = JSON.parse(unescape(resp.attachment));\n                // let base_url = \"{{ url('/') }}\";\n                $.each(data, function (key, value) {\n                    let file_path = value.img_path;\n                    let file_type = file_path.substr(file_path.indexOf(\".\") + 1);\n\n                    if (file_type != 'pdf') {\n                        if (file_path != '') {\n                            image += '<div class=\"col-3\" style=\"padding: 7.5px 7.5px 7.5px 7.5px; height: 300px;text-align: center; margin-top: 2%;background-color: #e7e3e3;\"><img src=\"/storage/' + file_path + '\" class=\"img-fluid\" alt=\"\" style=\"width: auto; height: 200px; max-width: 384px;\"><hr> <button type=\"button\" data-name=\"' + file_path + '\" class=\"btn btn-danger remove_attach\">Remove</button> <a class=\"btn btn-primary m-1\" href=\"/storage/' + file_path + '\" target=\"blank\">View</a></div>';\n                        }\n                    } else {\n                        if (file_path != '') {\n                            image += '<div class=\"col-3\" style=\"padding: 7.5px 7.5px 7.5px 7.5px; height: 300px;text-align: center; margin-top: 2%;background-color: #e7e3e3;\"><embed  src=\"/storage/' + file_path + '\" class=\"img-fluid\" alt=\"\" style=\"width: auto; height: 200px; max-width: 384px;\"><hr> <button type=\"button\" data-name=\"' + file_path + '\" class=\"btn btn-danger remove_attach\">Remove</button> <a class=\"btn btn-primary m-1\" href=\"/storage/' + file_path + '\" target=\"blank\">View</a></div>';\n                        }\n                    }\n\n                });\n\n                $('#file_attachments').html(image);\n            }\n        }\n\n        if (resp.complain_comments != '') {\n            iterateComplain_comments(resp.complain_comments, user_id);\n        }\n\n        if (resp.complain_minutes != '') {\n            iterateComplain_minit(resp.complain_minutes, user_id);\n            // let minutes = '';\n            // $.each(resp.complain_minutes, function (key, value2) {\n            //     minutes += '<div class=\"card-comment\"><div class=\"comment-text\"><span class=\"username\">' + value2.minute_user.user_name + '<span class=\"text-muted float-right\">' + value2.created_at + '</span><br><span class=\"text-muted\">' + value2.minute + '</span></div></div>';\n            // });\n            // $('#minute_section').html(minutes);\n        }\n        let assigned_user = 'Not Assigned';\n        if (resp.assigned_user != null) {\n            assigned_user = resp.assigned_user.first_name + ' ' + resp.assigned_user.last_name;\n        }\n        $('#assigned_user').html(assigned_user);\n    });\n}\nfunction iterateComplain_minit(object, user_id) {\n    let minute = '';\n    $.each(object, function (key, value2) {\n        let chat_msg = (value2.minute_user.id != user_id) ? 'right' : '';\n        let chat_name = (value2.minute_user.id != user_id) ? 'float-right' : 'float-left';\n        let chat_time = (value2.minute_user.id != user_id) ? 'float-left' : 'float-right';\n        minute += `<div class=\"direct-chat-msg ${chat_msg}\"><div class=\"direct-chat-infos clearfix\">\n                <span class=\"direct-chat-name ${chat_name}\">${value2.minute_user.first_name} ${value2.minute_user.last_name}</span>\n                <span class=\"direct-chat-timestamp ${chat_time}\">${value2.created_at}</span>\n            </div>\n            <img class=\"direct-chat-img\" src=\"/dist/img/user3-128x128.jpg\" alt=\"Message User Image\">\n            <div class=\"direct-chat-text\">${value2.minute}</div>\n        </div>`;\n    });\n    $('#minute_section').html(minute);\n}\nfunction iterateComplain_comments(object, user_id) {\n    let comments = '';\n    $.each(object, function (key, value2) {\n        let chat_msg = (value2.commented_user.id != user_id) ? 'right' : '';\n        let chat_name = (value2.commented_user.id != user_id) ? 'float-right' : 'float-left';\n        let chat_time = (value2.commented_user.id != user_id) ? 'float-left' : 'float-right';\n        comments += `<div class=\"direct-chat-msg ${chat_msg}\"><div class=\"direct-chat-infos clearfix\">\n                <span class=\"direct-chat-name ${chat_name}\">${value2.commented_user.first_name} ${value2.commented_user.last_name}</span>\n                <span class=\"direct-chat-timestamp ${chat_time}\">${value2.created_at}</span>\n            </div>\n            <img class=\"direct-chat-img\" src=\"/dist/img/user3-128x128.jpg\" alt=\"Message User Image\">\n            <div class=\"direct-chat-text\">${value2.comment}</div>\n        </div>`;\n    });\n    $('.comment_section').html(comments);\n}\n\nfunction load_forward_history_table(complain_id) {\n\n    let url = '/api/complain_log_data/complain/' + complain_id;\n\n    ajaxRequest('GET', url, null, function (resp) {\n        var forward_hist_table = \" \";\n        $('#forward_history').DataTable().destroy();\n        $.each(resp, function (key, value2) {\n            key++;\n            let assignee_name = '-';\n            let assigner_name = '-';\n\n            if (value2['assignee_user'] != null) {\n                assignee_name = value2['assignee_user'].first_name + \" \" + value2['assignee_user'].last_name;\n            }\n            if (value2['assigner_user'] != null) {\n                assigner_name = value2['assigner_user'].first_name + \" \" + value2['assigner_user'].last_name;\n            }\n            forward_hist_table += \"<tr><td>\" + key + \"</td><td>\" + assignee_name + \"</td><td>\" + assigner_name + \"</td><td>\" + value2.assigned_time + \"</td></tr>\";\n        });\n        $('#forward_history tbody').html(forward_hist_table);\n        $('#forward_history').DataTable({\n            \"pageLength\": 5,\n            aLengthMenu: [\n                [5, 10, 25, 50, 100, -1],\n                [5, 10, 25, 50, 100, \"All\"]\n            ],\n            \"bDestroy\": true,\n            iDisplayLength: 10\n        });\n    });\n\n}\n\nfunction load_user_by_level(level) {\n    ajaxRequest('GET', \"/api/get_users_for_level/level/\" + level, null, function (dataSet) {\n        var combo = \"\";\n        if (dataSet.length == 0) {\n            combo += \"<option value=''>NO DATA FOUND</option>\";\n        } else {\n            $.each(dataSet, function (index, value) {\n                combo += \"<option value='\" + value.id + \"'>\" + value.first_name + \" - (\" + value.name + \") </option>\";\n            });\n        }\n        $('#user').html(combo);\n        if (typeof callBack !== 'undefined' && callBack != null && typeof callBack === \"function\") {\n            callBack();\n        }\n    });\n}\n\nfunction forms_reset() {\n    $('#comments_frm')[0].reset();\n    $('#minutes_frm')[0].reset();\n    $('#complain_assign_frm')[0].reset();\n}\n\nfunction assign_user_to_complain(complain_id, user_id) {\n    ajaxRequest('GET', \"/api/assign_complain_to_user/complain_id/\" + complain_id + \"/user_id/\" + user_id, null, function (result) {\n        if (result.status == 1) {\n            swal.fire('success', 'Successfully assigned the user to the complain', 'success');\n            forms_reset();\n            loadProfileData();\n            load_forward_history_table(complain_id);\n        } else {\n            swal.fire('failed', 'User assigning was unsuccessful', 'warning');\n        }\n    });\n}\n\nfunction comment_on_complain() {\n    if ($('#comment').val().trim() != '') {\n        let data = { 'minute': $('#comment').val().trim() };\n        ajaxRequest('POST', \"/api/comment_on_complain\", data, function (result) {\n            if (result.status == 1) {\n                swal.fire('success', 'Successfully added the comment', 'success');\n                forms_reset();\n                loadProfileData();\n            } else {\n                swal.fire('failed', 'Comment addition was unsuccessful', 'warning');\n            }\n        });\n    } else {\n        swal.fire('failed', 'Comment cannot be empty!', 'warning');\n    }\n}\n\nfunction add_minute_to_complain() {\n    if ($('#minute').val() != '') {\n        let data = $('#minutes_frm').serializeArray();\n        ajaxRequest('POST', \"/api/minute_on_complain\", data, function (result) {\n            if (result.status == 1) {\n                swal.fire('success', 'Successfully added the minute', 'success');\n                forms_reset()\n                loadProfileData();\n            } else {\n                swal.fire('failed', 'minute addition was unsuccessful', 'warning');\n            }\n        });\n    } else {\n        swal.fire('failed', 'Minute cannot be empty!', 'warning');\n    }\n}\n\nfunction confirm_complain(complain_id) {\n    ajaxRequest('GET', \"/api/confirm_complain/complain/\" + complain_id, null, function (result) {\n        if (result.status == 1) {\n            swal.fire('success', 'Successfully confirmed the complain', 'success');\n            loadProfileData();\n        } else {\n            swal.fire('failed', 'Complain confirmation was unsuccessful', 'warning');\n        }\n    });\n}\n\nfunction reject_complain(complain_id) {\n    ajaxRequest('GET', \"/api/reject_complain/complain/\" + complain_id, null, function (result) {\n        if (result.status == 1) {\n            swal.fire('success', 'Successfully rejected the complain', 'success');\n            loadProfileData();\n        } else {\n            swal.fire('failed', 'Complain rejection was unsuccessful', 'warning');\n        }\n    });\n}\n\nfunction forward_letter_preforation(complain_id) {\n    ajaxRequest('GET', \"/api/forward_to_letter_preforation/complain/\" + complain_id, null, function (result) {\n        if (result.status == 1) {\n            swal.fire('success', 'Forward to letter preforation was successful', 'success');\n            loadProfileData();\n        } else {\n            swal.fire('failed', 'Forward to letter preforation was unsuccessful', 'warning');\n        }\n    });\n}\n\nfunction load_file_no() {\n    ajaxRequest('GET', \"/api/load_file_no\", null, function (dataSet) {\n        var combo = \"\";\n        if (dataSet.length == 0) {\n            combo += \"<option value=''>NO DATA FOUND</option>\";\n        } else {\n            $.each(dataSet, function (index, value) {\n                combo += \"<option value='\" + value.id + \"'>\" + value.file_no + \"</option>\";\n            });\n        }\n        $('#client_id').html(combo);\n        $('.select2').select2();\n\n        if (typeof callBack !== 'undefined' && callBack != null && typeof callBack === \"function\") {\n            callBack();\n        }\n    });\n}\n\nfunction assign_file_no(complain_id, client_id) {\n    let data = {\n        \"id\": complain_id,\n        \"client_id\": client_id,\n    };\n    let url = '/api/assign_file_no';\n    ajaxRequest('POST', url, data, function (resp) {\n        if (resp.status == 1) {\n            swal.fire('success', 'File No has assigned for the complain', 'success');\n        } else {\n            swal.fire('failed', 'File No assignment for the complain was unsuccessful', 'warning');\n        }\n    });\n}\n"
        }
    ]
}